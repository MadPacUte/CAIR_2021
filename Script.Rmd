---
title: "CAIR 2021"
author: "Randall"
date: "`r format(Sys.time(), '%Y-%B-%d')`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
# Load up necessary packages up front so that if you hand this code off to a
# coworker, it will fail at the beginning of the script.

# There are a few options you have to load up packages. The first is to use the function (library())

# library(tidyverse)
# library(janitor)

# There is another option that we reuse over and over. 

# Create a logical check to see if the package *pacman* has been installed. 
# If it has not been installed, then R will install it.

if(!require(pacman)) install.packages("pacman")

# Then using one of the functions (p_load()) within the package *pacman* we load the packages we want to use

pacman::p_load(tidyverse, lubridate, janitor)

# Some of our favorite packages to use within data analysis, but are not using today:
# tidyverse, lubridate, readxl, janitor, plotly, reactable, DT, scales, tidygeocoder, here

# Set theme for better visualization
theme_set(theme_light())

```



```{r}
# Read in the first data set that will be used within the report
# We will use the function (read_csv()) from the package *readr*

data <- 
  readr::read_csv("https://raw.githubusercontent.com/MadPacUte/CAIR_2021/main/CAIR_2021_Data.csv")

# Read in the second data set that will be used within the report
# We will use the function (read_csv()) from the package *readr*

data_2 <- 
  readr::read_csv("https://raw.githubusercontent.com/MadPacUte/CAIR_2021/main/CAIR_2021_Data_2.csv")
  
```


```{r}
# Append the data together using the function (bind_rows()) from the package (dplyr)

data_raw <- 
  data %>% 
  dplyr::bind_rows(data_2)

# Do a quick check and ensure that the data was appended properly
# R is a great tool and has a lot of cool features, such as a calculator already built in

5998 + 6316

# Or you can use the function (nrow) for each dataset and add the two together

# nrow(data) + nrow(data_2)

# Double check that the two match
# (5998 + 6316) == nrow(data) + nrow(data_2)

```


```{r}
# After verifying you have all of the data within the completed dataset we can clean up the names of the columns
# We will do this by using the function (clean_names()) from the package *janitor* 

data_clean <- 
  data_raw %>% 
  janitor::clean_names()

# The function (clean_names()) is great for cleaning up messy column names that are not structured very well

# Let's look at at the first 6 columns to compare what the column names looked like prior 

data_raw %>% 
  dplyr::select(1:6)

# This is what they transformed into

data_clean %>% 
  dplyr::select(1:6)

# Much cleaner names, easier to read, and replaced capital letters with lowercase and _ to connect words

```


```{r}
# Now we will look at the column types using the function (glimpse()) from the package *dplyr*  

data_clean %>% 
  dplyr::glimpse()

# We can see that age is a dbl, hs_gpa is a chr.
# These data types are some of the most common ones 
# Another common one is Date, which we would suggest looking into the package (lubridate)

# We can see that hs_gpa column is classified as a character, but we want to convert it to a factor

# We can convert the variable into a factor by using the function (mutate()) from the package *dplyr*

data_clean <- 
  data_clean %>% 
  dplyr::mutate(hs_gpa = factor(hs_gpa)) 

# We can now see that the hs_gpa column has now been reclassified as a factor

data_clean %>% 
  dplyr::glimpse()

# Factors are classified by their ranking. Let's look at the levels of the hs_gpa column that we just converted
# into a factor is leveled.

levels(data_clean$hs_gpa)

# We can write out the levels by hand if we want them in a certain order. Let's assign an object to classify it correctly. 

levels <- 
  c("0.0-.4",  "1.5-1.9", "2.0-2.4", "2.5-2.9", "3.0-3.4", "3.5-4.0", "> 4.0", "Unknown")

# We want to classify them into the correct order (lowest to highest) by using an argument from the function (factor())

data_clean <- 
  data_clean %>% 
  dplyr::mutate(hs_gpa = factor(hs_gpa, level = levels)) 

# Verify that they are now in the correct order.

levels(data_clean$hs_gpa)

```



```{r}
# Let's do some basic graphs to explore the data. 




```


```{r}




```



```{r}





```



```{r}





```


```{r}





```



```{r}





```


